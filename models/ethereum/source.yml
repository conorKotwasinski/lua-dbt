version: 2

sources:
  - name: ethereum
    description: Ethereum raw data
    loader: https://github.com/luabase/lua-ethereum-etl
    tables:
      - name: blocks_raw
        loaded_at_field: timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: contracts_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: calls_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: events_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: logs_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: tags_raw
        identifier: tags_deduped_raw

      - name: token_transfers_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: tokens_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: day }

      - name: traces_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

      - name: transactions_raw
        loaded_at_field: block_timestamp
        freshness:
          error_after: { count: 1, period: hour }

  - name: contract
    tables:
      - name: details
